---
apiVersion: resources.stuttgart-things.com/v1alpha1
kind: ClaimTemplate
metadata:
  name: harvestervm-detailed
  title: Crossplane Harvester VM (Detailed)
  description: Creates a Harvester VM with control over environment, networking, and sizing
  tags:
    - harvester
    - vm
    - crossplane
    - kubevirt
    - detailed
spec:
  type: harvestervm
  source: oci://ghcr.io/stuttgart-things/claim-xplane-harvestervm
  tag: 0.1.3
  parameters:
    - name: templateName
      title: Template
      type: string
      default: demo
      enum:
        - demo
        - production
        - minimal
      description: "KCL template: demo (standard), production (hardened settings), minimal (bare minimum)"

    - name: name
      title: VM Name
      type: string
      required: true
      default: demo-harvester-vm
      pattern: "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"
      description: "Name of the VM"

    - name: size
      title: T-Shirt Size
      type: string
      default: M
      enum:
        - S
        - M
        - L
        - XL
        - XXL
      description: "VM size: S (2CPU/2Gi/20Gi), M (4CPU/4Gi/40Gi), L (8CPU/8Gi/80Gi), XL (16CPU/16Gi/160Gi), XXL (32CPU/32Gi/320Gi)"

    - name: namespace
      title: Namespace
      type: string
      default: default
      description: "Kubernetes namespace for the claim"

    - name: providerConfigRef
      title: Provider Config
      type: string
      required: true
      default: dev
      description: "Name of the ProviderConfig for Kubernetes operations"

    - name: os
      title: Operating System
      type: string
      default: ubuntu
      description: "OS type for the VM"

    - name: domain
      title: Domain
      type: string
      default: stuttgart-things.local
      description: "Domain name for the VM"

    - name: networkName
      title: Network Name
      type: string
      default: default/default
      description: "Network name (namespace/name format)"

    - name: runStrategy
      title: Run Strategy
      type: string
      default: RerunOnFailure
      enum:
        - Always
        - RerunOnFailure
        - Manual
        - Halted
      description: "VM run strategy"

    - name: storageClassName
      title: Storage Class
      type: string
      required: true
      default: harvester-longhorn
      description: "Storage class name for the PVC"
      hidden: true

    - name: timezone
      title: Timezone
      type: string
      default: Europe/Berlin
      description: "Timezone"
      hidden: true

    - name: evictionStrategy
      title: Eviction Strategy
      type: string
      default: LiveMigrateIfPossible
      description: "VM eviction strategy"
      hidden: true
